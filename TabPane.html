<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>C&lt;CGI::TabPane&gt; - Support panes with clickable tabs</title>
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">Synopsis</a></li>
	<li><a href="#description">Description</a></li>
	<li><a href="#installation">Installation</a></li>
	<li><a href="#distributions">Distributions</a></li>
	<li><a href="#constructor_and_initialization">Constructor and initialization</a></li>
	<li><a href="#terminology">Terminology</a></li>
	<li><a href="#the_structure_of_the_data">The Structure of the Data</a></li>
	<li><a href="#limitations">Limitations</a></li>
	<li><a href="#method:_get($name_of_thing_to_get)">Method: <code>get($name_of_thing_to_get)</code></a></li>
	<li><a href="#example_code">Example code</a></li>
	<li><a href="#required_modules">Required Modules</a></li>
	<li><a href="#changes">Changes</a></li>
	<li><a href="#related_modules">Related Modules</a></li>
	<li><a href="#author">Author</a></li>
	<li><a href="#copyright">Copyright</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p><code>CGI::TabPane</code> - Support panes with clickable tabs</p>
<p>
</p>
<hr />
<h1><a name="synopsis">Synopsis</a></h1>
<pre>
        use CGI::TabPane;</pre>
<pre>
        CGI::TabPane -&gt; new(data =&gt; [...]) -&gt; get('html');</pre>
<p>
</p>
<hr />
<h1><a name="description">Description</a></h1>
<p><code>CGI::TabPane</code> is a pure Perl module.</p>
<p>It is a wrapper around the superb JavaScript package 'Tab Pane' by Erik Arvidsson.</p>
<p>Erik's article on Tab Pane is here: <a href="http://webfx.eae.net/dhtml/tabpane/tabpane.html">http://webfx.eae.net/dhtml/tabpane/tabpane.html</a></p>
<p>I have simplified some of Erik's files, and renamed some, to make shipping and installing easier.</p>
<p>
</p>
<hr />
<h1><a name="installation">Installation</a></h1>
<p>The makefile will install /perl/site/lib/CGI/TabPane.pm.</p>
<p>You must manually install &lt;Document Root&gt;/css/tabpane/*.[css|png] and &lt;Document Root&gt;/js/tabpane/*.js.</p>
<p>If you choose to put the CSS elsewhere, you'll need to call new(final_css =&gt; '/new/path/final.css').
Similarly for style_css.</p>
<p>Note: If you put webfxlayout.css elsewhere, you'll have to edit webfxlayout.js.</p>
<p>If you choose to put the JavaScript elsewhere, you'll need to call new(tabpane_js =&gt; '/new/path/tabpane.css').
Similarly for webfxlayout_js.</p>
<p>These options can be used together, and can be passed into <code>set()</code> rather than <code>new()</code>.</p>
<p>
</p>
<hr />
<h1><a name="distributions">Distributions</a></h1>
<p>This module is available both as a Unix-style distro (*.tgz) and an
ActiveState-style distro (*.ppd). The latter is shipped in a *.zip file.</p>
<p>See <a href="http://savage.net.au/Perl-modules.html">http://savage.net.au/Perl-modules.html</a> for details.</p>
<p>See <a href="http://savage.net.au/Perl-modules/html/installing-a-module.html">http://savage.net.au/Perl-modules/html/installing-a-module.html</a> for
help on unpacking and installing each type of distro.</p>
<p>
</p>
<hr />
<h1><a name="constructor_and_initialization">Constructor and initialization</a></h1>
<p><code>new(...)</code> returns a <code>CGI::TabPane</code> object.</p>
<p>This is the class's contructor.</p>
<p>Usage: CGI::TabPane -&gt; new().</p>
<p>This method takes a set of parameters. Only the data parameter is mandatory.</p>
<p>For each parameter you wish to use, call new as new(param_1 =&gt; value_1, ...).</p>
<dl>
<dt><strong><a name="item_current_tab">current_tab</a></strong><br />
</dt>
<dd>
This value is a string, the name of tab, used to specify which tab on the first pane is to be the current tab
when that pane is displayed.
</dd>
<dd>
<p>For example, tab 'Search' could contain a CGI form, with that tab being the default or current tab the first time the
CGI script is called to generate output. Then, when the submit button on that form is clicked, the CGI script could
generate the next lot of output with a different tab, e.g. tab 'Results', being the current tab.</p>
</dd>
<dd>
<p>There is no provision for controlling which tab is the current tab on any pane after the first pane.</p>
</dd>
<dd>
<p>The default value is ''.</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<dd>
<p>Note: In the JavaScript, the tabs are numbered left to right, starting at 0.</p>
</dd>
<p></p>
<dt><strong><a name="item_data">data</a></strong><br />
</dt>
<dd>
This value holds all the information required to build the panes and tabs per pane.
</dd>
<dd>
<p>See the sections below called 'Terminology' and 'The Structure of the Data' for details.</p>
</dd>
<dd>
<p>The default value is '' (the empty string), which will die because you must pass in an array ref.</p>
</dd>
<dd>
<p>This parameter is mandatory.</p>
</dd>
<p></p>
<dt><strong><a name="item_final_css">final_css</a></strong><br />
</dt>
<dd>
This value is the name of a CSS file. The module ships with a suitable file called final.css.
</dd>
<dd>
<p>Warning: This file must be output in the &lt;head&gt; of your HTML page <code>after</code> the CSS file you
choose with the style_css parameter. See examples/test-cgi-tabpane.cgi for a demo.</p>
</dd>
<dd>
<p>Warning: Do not edit final.css. Even tiny changes will have horrible effects on the output.</p>
</dd>
<dd>
<p>The default value is '/css/tabpane/final.css'.</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p>
<dt><strong><a name="item_html">html</a></strong><br />
</dt>
<dd>
Normally you would not do this, but if you want, you can pass in a value for the <a href="#item_html"><code>html</code></a> parameter, and the
HTML generated by this module will be appended to your initial value.
</dd>
<dd>
<p>The default value is ''.</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p>
<dt><strong><a name="item_infix_html">infix_html</a></strong><br />
</dt>
<dd>
This value is a string of HTML to be inserted between panes, to separate them vertically.
</dd>
<dd>
<p>A typical value might be: '&lt;p&gt;&amp;nbsp;&lt;/p&gt;'.</p>
</dd>
<dd>
<p>The default value is '' (the empty string).</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p>
<dt><strong><a name="item_prefix_html">prefix_html</a></strong><br />
</dt>
<dd>
This value is a string of HTML to be inserted before the first pane.
</dd>
<dd>
<p>A typical value might be: '&lt;p&gt;&amp;nbsp;&lt;/p&gt;'.</p>
</dd>
<dd>
<p>The default value is '' (the empty string).</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p>
<dt><strong><a name="item_style_css">style_css</a></strong><br />
</dt>
<dd>
This value is the name of a CSS file which determines the overall style of the output. The module ships with
three suitable files:
</dd>
<dl>
<dt><strong><a name="item_luna%2ecss">luna.css</a></strong><br />
</dt>
<dt><strong><a name="item_webfx%2ecss">webfx.css</a></strong><br />
</dt>
<dt><strong><a name="item_winclassic%2ecss">winclassic.css</a></strong><br />
</dt>
</dl>
<p>The default value is '/css/tabpane/luna.css'.</p>
<p>This parameter is optional.</p>
<dt><strong><a name="item_suffix_html">suffix_html</a></strong><br />
</dt>
<dd>
This value is a string of HTML to be inserted after the last pane.
</dd>
<dd>
<p>A typical value might be: '&lt;p&gt;&amp;nbsp;&lt;/p&gt;'.</p>
</dd>
<dd>
<p>The default value is '' (the empty string).</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p>
<dt><strong><a name="item_tabpane_js">tabpane_js</a></strong><br />
</dt>
<dd>
This value is the name of a JavaScript file. The module ships with a suitable file called tabpane.js.
</dd>
<dd>
<p>Warning: Do not edit tabpane.js. Even tiny changes will have horrible effects on the output.</p>
</dd>
<dd>
<p>The default value is '/js/tabpane/tabpane.js'.</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p>
<dt><strong><a name="item_use_cookie">use_cookie</a></strong><br />
</dt>
<dd>
This value is a Boolean, 0 or 1, which respectively deactivates or activates the persistance option of the WebFXTabPane
class in tabpane.js. Activation means the JavaScript uses a cookie to save the state of which tab on the first pane is
the current tab.
</dd>
<dd>
<p>The default value is 1, since that's the default in the WebFXTabPane class, and so that's what will have been used in
the past when this module was run without this parameter.</p>
</dd>
<dd>
<p>There is no provision for saving the state of which tab is the current tab on any pane after the first pane, because
the name of the cookie does not include any indicator as to which pane the current tab belongs to.</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<dd>
<p>Historical note: The word Boolean must have a capital B because it's based on the name of a person - George Boole.</p>
</dd>
<p></p>
<dt><strong><a name="item_webfxlayout_js">webfxlayout_js</a></strong><br />
</dt>
<dd>
This value is the name of a JavaScript file. The module ships with a suitable file called webfxlayout.js.
</dd>
<dd>
<p>Warning: Do not edit webfxlayout.js. Even tiny changes will have horrible effects on the output.</p>
</dd>
<dd>
<p>The default value is '/js/tabpane/webfxlayout.js'.</p>
</dd>
<dd>
<p>This parameter is optional.</p>
</dd>
<p></p></dl>
<p>
</p>
<hr />
<h1><a name="terminology">Terminology</a></h1>
<p>The comments below this diagram define a few terms.</p>
<p>The example shipped with this module will make things much clearer. See the examples/ directory.</p>
<p>Alternately, go straight to Erik's demo at: <a href="http://webfx.eae.net/dhtml/tabpane/demo.html">http://webfx.eae.net/dhtml/tabpane/demo.html</a></p>
<pre>
        [Tab 1-1] [Tab 1-2] [TAB 1-3] [Tab 1-4]
        [===============================================]
        [ Text for tab 1-3                              ]
        [===============================================]</pre>
<pre>
        [TAB 2-1] [Tab 2-2]
        [==============================]
        [ +Legend--------------------+ ]
        [ |Text for tab 2-1          | ]
        [ +--------------------------+ ]
        [==============================]</pre>
<dl>
<dt><strong><a name="item_pane">Pane</a></strong><br />
</dt>
<dd>
We have 2 'panes', one on top of the other.
</dd>
<dd>
<p>Panes are tiled vertically.</p>
</dd>
<dd>
<p>Use the <a href="#item_infix_html"><code>infix_html</code></a> parameter to <code>new()</code> or <code>set()</code> to change the vertical separation of the panes.</p>
</dd>
<p></p>
<dt><strong><a name="item_tab">Tab</a></strong><br />
</dt>
<dd>
The top pane has 4 'tabs' side-by-side. The bottom pane has 2 tabs.
</dd>
<dd>
<p>Tabs are tiled horizontally.</p>
</dd>
<p></p>
<dt><strong><a name="item_current_tab">Current tab</a></strong><br />
</dt>
<dd>
The current tab within a pane is the tab most-recently clicked.
</dd>
<dd>
<p>Tab 3 in the 1st pane and tab 1 in the 2nd pane are in upper case in the diagram to indicate they are the
'current tab' in each pane. The upper case above is just something I made up for the purposes of writing this
document. Of course, text is not converted to upper case by this module.</p>
</dd>
<dd>
<pre>
        Note: Tabs can be clicked with a mouse, and they can be clicked by executing code.</pre>
</dd>
<p></p>
<dt><strong><a name="item_current_text">Current text</a></strong><br />
</dt>
<dd>
The text associated with the current tab is called the 'current text'.
</dd>
<p></p>
<dt><strong><a name="item_body">Body</a></strong><br />
</dt>
<dd>
When a tab is clicked it becomes the current tab, and its text becomes the current text, and this text is displayed
in the 'body' of the pane, completely replacing any existing text being displayed in the body.
</dd>
<p></p>
<dt><strong><a name="item_legend">Legend</a></strong><br />
</dt>
<dd>
It is possible to use the HTML tag 'legend' to cause a box to be drawn by the web client (browser) around the current
text.
</dd>
<dd>
<p>Further, it is possible to get the web client to write a string of text on top of the upper left part of this box.</p>
</dd>
<dd>
<p>Such a string is called the 'legend'. See above for an example. See the examples/ directory for a better example.</p>
</dd>
<p></p></dl>
<p>
</p>
<hr />
<h1><a name="the_structure_of_the_data">The Structure of the Data</a></h1>
<p>Our first problem is to define a data structure which allows us to neatly supply our own data to populate a set
of panes and each set of tabs per pane.</p>
<dl>
<dt><strong><a name="item_data_for_a_set_of_panes">Data for a set of panes</a></strong><br />
</dt>
<dd>
The data structure defining the panes is an array ref. Each element of the array provides data for 1 pane.
</dd>
<dd>
<p>So, the above diagram will be something like:</p>
</dd>
<dd>
<pre>
        [&lt;Data for 1st pane&gt;, &lt;Data for 2nd pane&gt;].</pre>
</dd>
<p></p>
<dt><strong><a name="item_data_for_a_set_of_tabs">Data for a set of tabs</a></strong><br />
</dt>
<dd>
The data structure defining the tabs for 1 pane is an array ref. Each element of the array provides data for 1 tab.
</dd>
<dd>
<p>So, the above diagram will be something like:</p>
</dd>
<dd>
<pre>
        &lt;Data for 1st pane&gt;:</pre>
</dd>
<dd>
<pre>
        [&lt;Data for 1st tab of 1st pane&gt;, &lt;Data for 2nd tab of 1st pane&gt;, ...].</pre>
</dd>
<dd>
<pre>
        &lt;Data for 2nd pane&gt;:</pre>
</dd>
<dd>
<pre>
        [&lt;Data for 1st tab of 2nd pane&gt;, &lt;Data for 2nd tab of 2nd pane&gt;].</pre>
</dd>
<p></p>
<dt><strong><a name="item_data_for_1_tab_without_a_legend">Data for 1 tab without a legend</a></strong><br />
</dt>
<dd>
In the absence of a legend, the data for 1 tab is a hash ref:
</dd>
<dd>
<pre>
        &lt;Data for any tab (without a legend) of any pane&gt;:</pre>
</dd>
<dd>
<pre>
        {'Text for tab' =&gt; 'Text for body of pane'}</pre>
</dd>
<dd>
<p>Recall from the discussion of 'body' above: 'Text for body of pane' means the text which is to be displayed when
this particular tab if clicked.</p>
</dd>
<dd>
<p>In the diagram, then, the data for the 3rd tab of the 1st pane is:</p>
</dd>
<dd>
<pre>
        {'Tab 1-3' =&gt; 'Text for tab 1-3'}</pre>
</dd>
<p></p>
<dt><strong><a name="item_data_for_1_tab_with_a_legend">Data for 1 tab with a legend</a></strong><br />
</dt>
<dd>
In the presence of a legend, the data for 1 tab is a hash ref within a hash ref:
</dd>
<dd>
<pre>
        &lt;Data for any tab (with a legend) of any pane&gt;:</pre>
</dd>
<dd>
<pre>
        {'Text for tab' =&gt; {'Text for legend' =&gt; 'Text for body of pane'} }</pre>
</dd>
<dd>
<p>In the diagram, then, the data for the 1st tab of the 2nd pane is:</p>
</dd>
<dd>
<pre>
        {'Tab 2-1' =&gt; {'Legend' =&gt; 'Text for tab 2-1'} }</pre>
</dd>
<p></p>
<dt><strong><a name="item_data_for_nested_panes_and_tabs">Data for nested panes and tabs</a></strong><br />
</dt>
<dd>
In the presence of nested panes, the data for 1 tab is an array ref within a hash ref:
</dd>
<dd>
<pre>
        &lt;Data for a nested pane&gt;:</pre>
</dd>
<dd>
<pre>
        {'Text for tab' =&gt; [&lt;Data for 1st nested tab&gt;, &lt;Data for 2nd nested tab&gt;, ...]}</pre>
</dd>
<dd>
<p>Warning: This module will only handle 2 levels in this hierarchy of nesting, since it uses hard-coded CSS tokens for
the classes of the &lt;div&gt;s involved. By '2 levels' I mean 1 outer pane and 1 inner pane.</p>
</dd>
<dd>
<p>Warning: To have one nested pane, with its own set of tabs, makes sense. To add more complexity than that surely
means your design is too complex. By 'more complexity' I mean 2 panes displayed vertically within 1 pane.
So don't do that.</p>
</dd>
<p></p></dl>
<p>Lastly, the entire data structure for the diagram could be:</p>
<pre>
        [      # All panes
            [  # 1st pane
                {'Tab 1-1' =&gt; 'Text for tab 1-1'},
                {'Tab 1-2' =&gt; 'Text for tab 1-2'},
                {'Tab 1-3' =&gt; 'Text for tab 1-3'},
                {'Tab 1-4' =&gt; 'Text for tab 1-4'},
            ],
            [  # 2nd pane
                {'Tab 2-1' =&gt; {'Legend' =&gt; 'Text for tab 2-1'} },
                {'Tab 2-2' =&gt; 'Text for tab 2-2'},
            ],
        ]</pre>
<p>You are strongly urged to examine the demo examples/test-cgi-tabpane.cgi to get an understanding of how to construct
the required data structure.</p>
<p>
</p>
<hr />
<h1><a name="limitations">Limitations</a></h1>
<p>The numbers of the panes, 0 .. N, and the numbers of tabs per pane, 0 .. N, are used to generate strings which in turn
as used as names of things in the JavaScript and HTML.</p>
<p>The non-Perl code will only work if these names are unique. So, you are limited to 99 panes and 66 tabs per pane.</p>
<p>The Perl code does not check to ensure you are within in these limits.</p>
<p>
</p>
<hr />
<h1><a name="method:_get($name_of_thing_to_get)">Method: <code>get($name_of_thing_to_get)</code></a></h1>
<p>Returns a string.</p>
<p>The 'name of the thing to get' is any of the parameters which can be passed in to <code>new()</code>:</p>
<dl>
<dt><strong>data</strong><br />
</dt>
<dt><strong>final_css</strong><br />
</dt>
<dt><strong>html</strong><br />
</dt>
<dd>
This is the one which you absolutely must call.
</dd>
<p></p>
<dt><strong>infix_html</strong><br />
</dt>
<dt><strong>prefix_html</strong><br />
</dt>
<dt><strong>style_css</strong><br />
</dt>
<dt><strong>suffix_html</strong><br />
</dt>
<dt><strong>tabpane_js</strong><br />
</dt>
<dt><strong>webfxlayout_js</strong><br />
</dt>
</dl>
<p>In each case, the current value of the parameter held within the <code>CGI::TabPane</code> object is returned.</p>
<p>See the demo examples/test-cgi-tabpane.cgi for an example.</p>
<p>
</p>
<hr />
<h1><a name="example_code">Example code</a></h1>
<p>See the examples/ directory in the distro.</p>
<p>
</p>
<hr />
<h1><a name="required_modules">Required Modules</a></h1>
<p>Carp.</p>
<p>
</p>
<hr />
<h1><a name="changes">Changes</a></h1>
<p>See Changes.txt.</p>
<p>
</p>
<hr />
<h1><a name="related_modules">Related Modules</a></h1>
<p>CGI::Explorer, also one of my modules, is a pure Perl wrapper around another superb package from the House of EAE,
this time 'XTree' by Emil A Eklund.</p>
<p>Emil and Erik share the web site <a href="http://webfx.eae.net/">http://webfx.eae.net/</a> - please drop in there and express your thanx.</p>
<p>
</p>
<hr />
<h1><a name="author">Author</a></h1>
<p><code>CGI::TabPane</code> was written by Ron Savage <em>&lt;<a href="mailto:ron@savage.net.au">ron@savage.net.au</a>&gt;</em> in 2004.</p>
<p>Home page: <a href="http://savage.net.au/index.html">http://savage.net.au/index.html</a></p>
<p>
</p>
<hr />
<h1><a name="copyright">Copyright</a></h1>
<p>Australian copyright (c) 2004, Ron Savage. All rights reserved.</p>
<pre>
        All Programs of mine are 'OSI Certified Open Source Software';
        you can redistribute them and/or modify them under the terms of
        The Artistic License, a copy of which is available at:
        <a href="http://www.opensource.org/licenses/index.html">http://www.opensource.org/licenses/index.html</a></pre>

</body>

</html>
